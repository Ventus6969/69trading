# 69å¤§å¸«èƒŒé›¢äº¤æ˜“æ©Ÿå™¨äºº - æ¨¡çµ„åŒ–ç‰ˆæœ¬ v2.0

[![Python](https://img.shields.io/badge/Python-3.8%2B-blue.svg)](https://www.python.org/)
[![Flask](https://img.shields.io/badge/Flask-2.3%2B-green.svg)](https://flask.palletsprojects.com/)
[![License](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

## ğŸ¯ å°ˆæ¡ˆæè¿°

é€™æ˜¯ä¸€å€‹åŸºæ–¼TradingViewä¿¡è™Ÿçš„å…¨è‡ªå‹•åŒ–æœŸè²¨äº¤æ˜“æ©Ÿå™¨äººï¼Œç¶“éå®Œæ•´çš„æ¨¡çµ„åŒ–é‡æ§‹ã€‚æ”¯æ´å¹£å®‰æœŸè²¨äº¤æ˜“ï¼Œå…·å‚™å®Œå–„çš„é¢¨éšªæ§åˆ¶å’Œç›£æ§åŠŸèƒ½ã€‚

## âœ¨ ä¸»è¦ç‰¹è‰²

### ğŸ—ï¸ **æ¨¡çµ„åŒ–æ¶æ§‹**
- **ä¸»ç¨‹å¼**ï¼šå¾800è¡Œé‡æ§‹ç‚ºåƒ…30è¡Œ
- **8å€‹åŠŸèƒ½æ¨¡çµ„**ï¼šè·è²¬åˆ†é›¢ï¼Œæ˜“æ–¼ç¶­è­·
- **13å€‹æª”æ¡ˆ**ï¼šæ¸…æ™°çš„ç¨‹å¼ç¢¼çµæ§‹

### ğŸ¯ **äº¤æ˜“åŠŸèƒ½**
- **è‡ªå‹•ä¸‹å–®**ï¼šæ¥æ”¶TradingViewä¿¡è™Ÿè‡ªå‹•åŸ·è¡Œäº¤æ˜“
- **æ™ºèƒ½æ­¢ç›ˆ**ï¼šåŸºæ–¼ATRå‹•æ…‹è¨ˆç®—æ­¢ç›ˆåƒ¹æ ¼
- **é¢¨éšªæ§åˆ¶**ï¼š2%æ­¢æä¿è­·ï¼Œæœ€å°ç²åˆ©ä¿è­‰
- **åŠ å€‰é‚è¼¯**ï¼šåŒå‘åŠ å€‰ï¼Œå¹³å‡æˆæœ¬è¨ˆç®—

### ğŸ›¡ï¸ **é¢¨éšªç®¡ç†**
- **æ™‚é–“æ§åˆ¶**ï¼šå°ç£æ™‚é–“20:00-23:50ç¦æ­¢äº¤æ˜“
- **å€‰ä½ç®¡ç†**ï¼šæ”¯æ´å¤šå€‹äº¤æ˜“å°åŒæ™‚é‹è¡Œ
- **éŒ¯èª¤è™•ç†**ï¼šå®Œå–„çš„ç•°å¸¸è™•ç†æ©Ÿåˆ¶

### ğŸ“Š **ç›£æ§ç³»çµ±**
- **å¯¦æ™‚ç›£æ§**ï¼šWebSocketç›£æ§è¨‚å–®ç‹€æ…‹
- **å®Œæ•´API**ï¼š7å€‹APIç«¯é»ï¼Œå…¨é¢ç›£æ§
- **è©³ç´°æ—¥èªŒ**ï¼šå®Œæ•´çš„äº¤æ˜“è¨˜éŒ„

## ğŸ“ å°ˆæ¡ˆçµæ§‹

```
trading_bot/
â”œâ”€â”€ main.py                      # ğŸ¯ ä¸»ç¨‹å¼ (30è¡Œ)
â”œâ”€â”€ config/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ settings.py              # é…ç½®ç®¡ç†
â”œâ”€â”€ api/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ binance_client.py        # å¹£å®‰APIå®¢æˆ¶ç«¯
â”‚   â””â”€â”€ websocket_handler.py     # WebSocketç®¡ç†
â”œâ”€â”€ trading/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ order_manager.py         # è¨‚å–®ç®¡ç†
â”‚   â””â”€â”€ position_manager.py      # å€‰ä½ç®¡ç†
â”œâ”€â”€ web/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ app.py                   # Flaskæ‡‰ç”¨
â”‚   â”œâ”€â”€ routes.py                # APIè·¯ç”±
â”‚   â””â”€â”€ signal_processor.py      # ä¿¡è™Ÿè™•ç†
â””â”€â”€ utils/
    â”œâ”€â”€ __init__.py
    â”œâ”€â”€ helpers.py               # å·¥å…·å‡½æ•¸
    â””â”€â”€ logger_config.py         # æ—¥èªŒé…ç½®
```

## ğŸš€ å¿«é€Ÿé–‹å§‹

### 1. ç’°å¢ƒéœ€æ±‚
- Python 3.8+
- å¹£å®‰æœŸè²¨å¸³æˆ¶
- TradingView Proå¸³æˆ¶ï¼ˆç”¨æ–¼ç™¼é€ä¿¡è™Ÿï¼‰

### 2. å®‰è£æ­¥é©Ÿ

```bash
# å…‹éš†å°ˆæ¡ˆ
git clone https://github.com/æ‚¨çš„ç”¨æˆ¶å/trading-bot-refactored.git
cd trading-bot-refactored

# å‰µå»ºè™›æ“¬ç’°å¢ƒ
python -m venv trading_env
source trading_env/bin/activate  # Linux/Mac
# æˆ–
trading_env\Scripts\activate     # Windows

# å®‰è£ä¾è³´
pip install -r requirements.txt
```

### 3. é…ç½®è¨­å®š

```bash
# è¤‡è£½ç’°å¢ƒè®Šé‡ç¯„ä¾‹
cp .env.example .env

# ç·¨è¼¯.envæª”æ¡ˆï¼Œå¡«å…¥æ‚¨çš„APIå¯†é‘°
nano .env
```

åœ¨ `.env` æª”æ¡ˆä¸­å¡«å…¥ï¼š
```bash
BINANCE_API_KEY=your_api_key_here
BINANCE_API_SECRET=your_api_secret_here
```

### 4. å•Ÿå‹•ç³»çµ±

```bash
python main.py
```

å•Ÿå‹•æˆåŠŸå¾Œï¼Œæ‚¨å°‡çœ‹åˆ°ï¼š
```
============================================================
69å¤§å¸«èƒŒé›¢äº¤æ˜“æ©Ÿå™¨äºº - æ¨¡çµ„åŒ–ç‰ˆæœ¬ - ç³»çµ±å•Ÿå‹•
============================================================
æ§“æ¡¿è¨­å®š: 30x
é»˜èªæ­¢ç›ˆ: 5.0%
æ­¢æåŠŸèƒ½: å•Ÿç”¨
æ­¢æç™¾åˆ†æ¯”: 2.0%
============================================================
```

## ğŸ›ï¸ APIç«¯é»

| ç«¯é» | æ–¹æ³• | æè¿° |
|------|------|------|
| `/webhook` | POST | æ¥æ”¶TradingViewä¿¡è™Ÿ |
| `/health` | GET | å¥åº·æª¢æŸ¥å’Œç³»çµ±ç‹€æ…‹ |
| `/orders` | GET | æŸ¥è©¢è¨‚å–®ç‹€æ…‹ |
| `/positions` | GET | æŸ¥è©¢ç•¶å‰æŒå€‰ |
| `/cancel/<symbol>` | POST | å–æ¶ˆæŒ‡å®šäº¤æ˜“å°è¨‚å–® |
| `/config` | GET | ç²å–ç³»çµ±é…ç½® |
| `/stats` | GET | ç²å–äº¤æ˜“çµ±è¨ˆ |

### ä½¿ç”¨ç¯„ä¾‹

```bash
# å¥åº·æª¢æŸ¥
curl http://localhost:5000/health

# æŸ¥è©¢è¨‚å–®
curl http://localhost:5000/orders?symbol=BTCUSDT&limit=10

# æŸ¥è©¢æŒå€‰
curl http://localhost:5000/positions
```

## ğŸ“‹ TradingViewè¨­å®š

### Webhookè¨­å®š
åœ¨TradingViewçš„Alertä¸­è¨­å®šï¼š
- **Webhook URL**: `http://your-server:5000/webhook`
- **Message**: 
```json
{
  "strategy_name": "V69",
  "symbol": "{{ticker}}",
  "side": "BUY",
  "quantity": "100",
  "open": "{{open}}",
  "close": "{{close}}",
  "prev_close": "{{plot("PREV_CLOSE")}}",
  "prev_open": "{{plot("PREV_OPEN")}}",
  "order_type": "LIMIT",
  "position_side": "BOTH",
  "ATR": "{{plot("ATR")}}",
  "signal_type": "breakout_buy",
  "opposite": "0"
}
```

### æ”¯æ´çš„ç­–ç•¥é¡å‹
- **çœ‹å¤šç­–ç•¥**: `pullback_buy`, `breakout_buy`, `consolidation_buy`, `reversal_buy`, `bounce_buy`
- **çœ‹ç©ºç­–ç•¥**: `trend_sell`, `bounce_sell`, `breakdown_sell`, `high_sell`, `reversal_sell`

## âš™ï¸ é…ç½®èªªæ˜

### ä¸»è¦åƒæ•¸
- **æ§“æ¡¿**: 30å€ï¼ˆå¯åœ¨`config/settings.py`èª¿æ•´ï¼‰
- **æ­¢ç›ˆæ–¹å¼**: ATRå‹•æ…‹è¨ˆç®— + æœ€å°0.5%ä¿è­·
- **æ­¢æ**: 2%å›ºå®šæ­¢æ
- **äº¤æ˜“å°ç²¾åº¦**: æ”¯æ´å¤šç¨®äº¤æ˜“å°çš„åƒ¹æ ¼ç²¾åº¦

### æ­¢ç›ˆå€æ•¸è¨­å®š
```python
SIGNAL_TP_MULTIPLIER = {
    'pullback_buy': 1.2,     # å›èª¿è²·é€²
    'breakout_buy': 1.5,     # çªç ´è²·é€²
    'consolidation_buy': 1.0, # æ•´ç†è²·é€²
    # ... æ›´å¤šç­–ç•¥
}
```

## ğŸ“Š ç›£æ§å’Œæ—¥èªŒ

### æ—¥èªŒæª”æ¡ˆ
- ä½ç½®: `logs/trading_bot.log`
- æ ¼å¼: `æ™‚é–“ - ç´šåˆ¥ - è¨Šæ¯`
- åŒ…å«: äº¤æ˜“ä¿¡è™Ÿã€è¨‚å–®ç‹€æ…‹ã€éŒ¯èª¤ä¿¡æ¯

### ç›£æ§ä»‹é¢
```bash
# å³æ™‚æŸ¥çœ‹æ—¥èªŒ
tail -f logs/trading_bot.log

# ç›£æ§ç³»çµ±ç‹€æ…‹
curl http://localhost:5000/health | jq
```

## ğŸ›¡ï¸ å®‰å…¨å»ºè­°

### APIå¯†é‘°å®‰å…¨
- âœ… ä½¿ç”¨æœŸè²¨äº¤æ˜“å°ˆç”¨APIå¯†é‘°
- âœ… è¨­å®šIPç™½åå–®
- âœ… é™åˆ¶APIæ¬Šé™ï¼ˆåªéœ€æœŸè²¨äº¤æ˜“æ¬Šé™ï¼‰
- âŒ çµ•ä¸åœ¨ç¨‹å¼ç¢¼ä¸­ç¡¬ç·¨ç¢¼å¯†é‘°

### é¢¨éšªæ§åˆ¶
- å»ºè­°åˆæœŸä½¿ç”¨å°é¡æ¸¬è©¦
- è¨­å®šåˆç†çš„æ§“æ¡¿å€æ•¸
- å®šæœŸæª¢æŸ¥äº¤æ˜“è¨˜éŒ„
- ç›£æ§å¸³æˆ¶é¤˜é¡è®ŠåŒ–

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è¦‹å•é¡Œ

**1. ç„¡æ³•é€£æ¥å¹£å®‰API**
```bash
# æª¢æŸ¥APIå¯†é‘°é…ç½®
curl -H "X-MBX-APIKEY: your_api_key" https://fapi.binance.com/fapi/v1/time
```

**2. TradingViewä¿¡è™Ÿæœªè§¸ç™¼**
```bash
# æª¢æŸ¥webhookç«¯é»
curl -X POST http://localhost:5000/webhook \
  -H "Content-Type: application/json" \
  -d '{"test": "data"}'
```

**3. ç¨‹å¼ç„¡æ³•å•Ÿå‹•**
```bash
# æª¢æŸ¥ä¾è³´
pip list | grep flask

# æª¢æŸ¥Pythonç‰ˆæœ¬
python --version
```

## ğŸ“ˆ æ•ˆèƒ½æŒ‡æ¨™

### é‡æ§‹æ•ˆæœ
- **ä¸»ç¨‹å¼è¡Œæ•¸**: 800è¡Œ â†’ 30è¡Œ (-96%)
- **æª”æ¡ˆæ•¸é‡**: 1å€‹ â†’ 13å€‹ (+1200%)
- **å¯ç¶­è­·æ€§**: å¤§å¹…æå‡
- **åŠŸèƒ½å®Œæ•´æ€§**: 100%ä¿ç•™

### ç³»çµ±æ•ˆèƒ½
- **å»¶é²**: <100msè™•ç†TradingViewä¿¡è™Ÿ
- **è¨˜æ†¶é«”**: ç´„50MBé‹è¡Œæ™‚è¨˜æ†¶é«”
- **ä½µç™¼**: æ”¯æ´å¤šå€‹äº¤æ˜“å°åŒæ™‚é‹è¡Œ

## ğŸ¤ è²¢ç»æŒ‡å—

1. Forkæœ¬å°ˆæ¡ˆ
2. å‰µå»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. é–‹å•ŸPull Request

## ğŸ“œ æ›´æ–°æ—¥èªŒ

### v2.0.0 (2025-01-XX)
- ğŸ‰ å®Œæ•´æ¨¡çµ„åŒ–é‡æ§‹
- ğŸ—ï¸ 8å€‹åŠŸèƒ½æ¨¡çµ„åˆ†é›¢
- ğŸ“ ä¸»ç¨‹å¼ç¸®æ¸›è‡³30è¡Œ
- ğŸ”§ æ–°å¢å®Œæ•´APIç«¯é»

### v1.x (2025-06-XX)
- ä¿®æ­£æ‰‹å‹•å–®è¡çª
- èª¿æ•´æ­¢ç›ˆé‚è¼¯
- å¢åŠ æ­¢æé‚è¼¯2%

## âš ï¸ å…è²¬è²æ˜

æœ¬è»Ÿé«”åƒ…ä¾›æ•™è‚²å’Œç ”ç©¶ç›®çš„ä½¿ç”¨ã€‚åŠ å¯†è²¨å¹£äº¤æ˜“å­˜åœ¨é«˜é¢¨éšªï¼Œå¯èƒ½å°è‡´éƒ¨åˆ†æˆ–å…¨éƒ¨è³‡é‡‘æå¤±ã€‚ä½¿ç”¨è€…æ‡‰ï¼š

- å……åˆ†ç†è§£äº¤æ˜“é¢¨éšª
- åƒ…ä½¿ç”¨å¯æ‰¿å—æå¤±çš„è³‡é‡‘
- åœ¨å¯¦ç›¤ä½¿ç”¨å‰å……åˆ†æ¸¬è©¦
- è‡ªè¡Œæ‰¿æ“”æ‰€æœ‰äº¤æ˜“æ±ºç­–çš„è²¬ä»»

é–‹ç™¼è€…ä¸å°ä»»ä½•ç›´æ¥æˆ–é–“æ¥çš„æå¤±æ‰¿æ“”è²¬ä»»ã€‚

## ğŸ“ æ”¯æ´

å¦‚æœ‰å•é¡Œæˆ–å»ºè­°ï¼Œè«‹ï¼š
- é–‹å•Ÿ [GitHub Issue](https://github.com/æ‚¨çš„ç”¨æˆ¶å/trading-bot-refactored/issues)
- æŸ¥çœ‹ [Wikiæ–‡æª”](https://github.com/æ‚¨çš„ç”¨æˆ¶å/trading-bot-refactored/wiki)

## ğŸ“„ æˆæ¬Š

æœ¬å°ˆæ¡ˆæ¡ç”¨ [MIT License](LICENSE) æˆæ¬Š - æŸ¥çœ‹LICENSEæª”æ¡ˆäº†è§£è©³æƒ…ã€‚

---

**â­ å¦‚æœé€™å€‹å°ˆæ¡ˆå°æ‚¨æœ‰å¹«åŠ©ï¼Œè«‹çµ¦å€‹Staræ”¯æŒï¼**